open Core
open Async
open Hardcaml
open C8.Cpu_core
open Helper

let test ~rom_file ~create =
  let module Simulator = Cyclesim.With_interface (I) (O) in
  let sim = Simulator.create create in
  let inputs : _ I.t = Cyclesim.inputs sim in
  let outputs : _ O.t = Cyclesim.outputs sim in
  (* Write the test rom to main memory *)
  sim_program_rom sim inputs ~rom:(String.to_list rom_file |> List.map ~f:Char.to_int);
  (* Simulate the program we just wrote running for 100 cycles *)
  Sequence.range 0 100
  |> Sequence.iter ~f:(fun _ -> sim_cycle_not_programming sim inputs outputs);
  ()
;;

let%expect_test "program memory" =
  let%bind rom_file =
    Reader.file_contents "../test_rom/Maze (alt) [David Winter, 199x].ch8"
  in
  test ~rom_file ~create;
  [%expect
    {|
    ((op 0000000000000000) (program_read_data 96) (program_read_address 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (program_read_data 96) (program_read_address 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (program_read_data 96) (program_read_address 1)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (program_read_data 0) (program_read_address 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (program_read_data 96) (program_read_address 2)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (program_read_data 97) (program_read_address 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (program_read_data 96) (program_read_address 3)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (program_read_data 0) (program_read_address 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (program_read_data 96) (program_read_address 4)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (program_read_data 162) (program_read_address 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (program_read_data 96) (program_read_address 5)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (program_read_data 34) (program_read_address 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000000) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000000) (program_read_data 96) (program_read_address 6)
     (in_execute 0) (executor_pc 6) (executor_i 512) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000000) (program_read_data 194) (program_read_address 0)
     (in_execute 0) (executor_pc 6) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000000) (program_read_data 96) (program_read_address 7)
     (in_execute 0) (executor_pc 6) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000000) (program_read_data 1) (program_read_address 0)
     (in_execute 0) (executor_pc 6) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000100010) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 6) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000100010) (program_read_data 96) (program_read_address 8)
     (in_execute 0) (executor_pc 8) (executor_i 512) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000100010) (program_read_data 50) (program_read_address 0)
     (in_execute 0) (executor_pc 8) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000100010) (program_read_data 96) (program_read_address 9)
     (in_execute 0) (executor_pc 8) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000100010) (program_read_data 1) (program_read_address 0)
     (in_execute 0) (executor_pc 8) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 8) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (program_read_data 96) (program_read_address 10)
     (in_execute 0) (executor_pc 10) (executor_i 512) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (program_read_data 162) (program_read_address 0)
     (in_execute 0) (executor_pc 10) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (program_read_data 96) (program_read_address 11)
     (in_execute 0) (executor_pc 10) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (program_read_data 30) (program_read_address 0)
     (in_execute 0) (executor_pc 10) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000001) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 10) (executor_i 512) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000001) (program_read_data 96) (program_read_address 12)
     (in_execute 0) (executor_pc 12) (executor_i 513) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000001) (program_read_data 208) (program_read_address 0)
     (in_execute 0) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000001) (program_read_data 96) (program_read_address 13)
     (in_execute 0) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000000001) (program_read_data 20) (program_read_address 0)
     (in_execute 0) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000011110) (program_read_data 96) (program_read_address 0)
     (in_execute 1) (executor_pc 12) (executor_i 513) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0))) |}];
  return ()
;;
