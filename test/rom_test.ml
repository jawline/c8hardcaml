open Core
open Async
open Hardcaml
open C8.Cpu_core
open Helper

let test ~rom_file ~create =
  let module Simulator = Cyclesim.With_interface (I) (O) in
  let sim = Simulator.create create in
  let inputs : _ I.t = Cyclesim.inputs sim in
  let outputs : _ O.t = Cyclesim.outputs sim in
  (* Write the test rom to main memory *)
  sim_program_rom sim inputs ~rom:(String.to_list rom_file |> List.map ~f:Char.to_int);
  (* Simulate the program we just wrote running for 100 cycles *)
  Sequence.range 0 100
  |> Sequence.iter ~f:(fun _ -> sim_cycle_not_programming sim inputs outputs);
  ()
;;

let%expect_test "program memory" =
  let%bind rom_file =
    Reader.file_contents "../test_rom/Maze (alt) [David Winter, 199x].ch8"
  in
  test ~rom_file ~create;
  [%expect
    {|
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0110000001100000) (read_address 1)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0110000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (working_op 0110000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 0) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (working_op 0110000001100000) (read_address 2)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (working_op 0110000001100001) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (working_op 0110000101100000) (read_address 3)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000000000000) (working_op 0110000100000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (working_op 0110000101100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 2) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (working_op 0110000101100000) (read_address 4)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (working_op 0110000110100010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (working_op 1010001001100000) (read_address 5)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0110000100000000) (working_op 1010001000100010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000100010) (working_op 1010001001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 4) (executor_i 0) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000100010) (working_op 1010001001100000) (read_address 6)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 6) (executor_i 546) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000100010) (working_op 1010001011000010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 6) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000100010) (working_op 1100001001100000) (read_address 7)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 6) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000100010) (working_op 1100001000000001) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 6) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000000001) (working_op 1100001001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 6) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000000001) (working_op 1100001001100000) (read_address 8)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 8) (executor_i 546) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000000001) (working_op 1100001000110010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 8) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000000001) (working_op 0011001001100000) (read_address 9)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 8) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1100001000000001) (working_op 0011001000000001) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 8) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (working_op 0011001001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 8) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (working_op 0011001001100000) (read_address 10)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 10) (executor_i 546) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (working_op 0011001010100010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 10) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (working_op 1010001001100000) (read_address 11)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 10) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011001000000001) (working_op 1010001000011110) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 10) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000011110) (working_op 1010001001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 10) (executor_i 546) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000011110) (working_op 1010001001100000) (read_address 12)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 12) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000011110) (working_op 1010001011010000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000011110) (working_op 1101000001100000) (read_address 13)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1010001000011110) (working_op 1101000000010100) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001100000) (read_address 542)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000000000000) (read_address 0)
     (read_data 0) (write_enable 1) (write_address 4096) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001100000) (read_address 543)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000000000000) (read_address 0)
     (read_data 0) (write_enable 1) (write_address 4128) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001100000) (read_address 544)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000000000000) (read_address 0)
     (read_data 0) (write_enable 1) (write_address 4160) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 12) (executor_i 542) (executor_done 0)
     (executor_error 1) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001100000) (read_address 14)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 14) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 1101000001110000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 14) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 0111000001100000) (read_address 15)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 14) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 1101000000010100) (working_op 0111000000000100) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 14) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0111000000000100) (working_op 0111000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 14) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (0 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0111000000000100) (working_op 0111000001100000) (read_address 16)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 16) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0111000000000100) (working_op 0111000000110000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 16) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0111000000000100) (working_op 0011000001100000) (read_address 17)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 16) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0111000000000100) (working_op 0011000001000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 16) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011000001000000) (working_op 0011000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 16) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011000001000000) (working_op 0011000001100000) (read_address 18)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 18) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011000001000000) (working_op 0011000000010010) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 18) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011000001000000) (working_op 0001001001100000) (read_address 19)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 18) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0011000001000000) (working_op 0001001000000100) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 18) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0001001000000100) (working_op 0001001001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 18) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0001001000000100) (working_op 0001001001100000) (read_address 516)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 516) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0001001000000100) (working_op 0001001000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 516) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0001001000000100) (working_op 0000000001100000) (read_address 517)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 516) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0001001000000100) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 516) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 516) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 518)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 518) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 518) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 519)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 518) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 518) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 518) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 520)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 520) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 520) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 521)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 520) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 520) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 520) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 522)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 522) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 522) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 523)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 522) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 522) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 522) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 524)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 524) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 524) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 525)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 524) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 524) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 524) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 526)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 526) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 526) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 527)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 526) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 526) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 526) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 528)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 528) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 528) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 529)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 528) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 528) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 528) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 530)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 530) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 530) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 531)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 530) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 530) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 1) (executor_pc 530) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 532)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 532) (executor_i 542) (executor_done 1)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 532) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000001100000) (read_address 533)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 532) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0)))
    ((op 0000000000000000) (working_op 0000000000000000) (read_address 0)
     (read_data 0) (write_enable 0) (write_address 0) (write_data 0)
     (in_execute 0) (executor_pc 532) (executor_i 542) (executor_done 0)
     (executor_error 0) (executor_registers (4 0 162 0 0 0 0 0 0 0 0 0 0 0 0 0))) |}];
  return ()
;;
